{"version":3,"file":"commonHelpers.js","sources":["../src/js/pixabay-api.js","../src/main.js"],"sourcesContent":["// https://pixabay.com/api/?key=42512017-1bddfdd3afd2851258a10c68c&q=sex&image_type=photo&orientation=horizontal&safesearch=true\n\nimport axios from 'axios';\nimport { createMarkup } from '../main';\nconst API_URL = 'https://pixabay.com/api/';\nconst API_KEY = '42512017-1bddfdd3afd2851258a10c68c';\n\nconst fetchImg = async (userRequest, page) => {\n  const response = await axios.get(\n    `${API_URL}?key=${API_KEY}&q=${userRequest}&image_type=photo&orientation=horizontal&safesearch=true&per_page=${per_page}&page=${page}`,\n    {\n      params: {\n        image_type: 'photo',\n        orientation: 'horizontal',\n        safesearch: 'true',\n        page: page,\n        per_page: 15,\n      },\n    }\n  );\n  return response.data;\n};\n\n// function fetchImg(userRequest, per_page = 9) {\n//   return fetch(\n//     `${API_URL}?key=${API_KEY}&q=${userRequest}&image_type=photo&orientation=horizontal&safesearch=true&per_page=${per_page}`\n//   ).then(res => res.json());\n// }\n\nexport { fetchImg };\n","'use strict';\nimport iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\nimport SimpleLightbox from 'simplelightbox';\nimport 'simplelightbox/dist/simple-lightbox.min.css';\n\nimport { fetchImg } from './js/pixabay-api';\n// import { fetchImg } from './js/render-functions';\n\nconst gallerySimple = new SimpleLightbox('.gallery a', {\n  captionsData: 'alt',\n  captionDelay: 250,\n});\n\nconst btn = document.querySelector('button[type=\"submit\"]');\nconst imgList = document.querySelector('.images-list');\nconst form = document.querySelector('.js-form');\nconst jsInput = document.querySelector('input[name=\"js-input\"]');\nconst loader = document.querySelector('.loader');\nloader.style.display = 'none';\n\nform.addEventListener('submit', searchForm);\n\nfunction searchForm(evt) {\n  evt.preventDefault();\n  loader.style.display = 'block';\n  const inputValue = evt.currentTarget.elements['js-input'].value;\n  if (!inputValue) {\n    btn.disabled = true;\n    iziToast.show({\n      message: 'Please, enter the value!',\n    });\n  } else {\n    fetchImg(inputValue, 1)\n      .then(res => {\n        //if img not find show alert\n        if (res.total === 0) {\n          iziToast.show({\n            message:\n              'Sorry, there are no images matching your search query. Please try again!',\n            backgroundColor: 'rgb(239, 64, 64)',\n          });\n        } else {\n          //clear\n          imgList.innerHTML = '';\n          imgList.insertAdjacentHTML('beforeend', createMarkup(res.hits));\n          gallerySimple.refresh();\n        }\n      })\n      .catch(err => {\n        console.log(err);\n        iziToast.error({\n          class: 'popup-message',\n          theme: 'dark',\n          backgroundColor: '#ef4040',\n          messageColor: '#fff',\n          iconUrl: Error,\n          position: 'topRight',\n          pauseOnHover: true,\n          timeout: 3000,\n          message: `${err}`,\n        });\n      })\n      .finally(() => {\n        // Hide loader when image loading is finished\n        loader.style.display = 'none';\n      });\n  }\n}\n\nfunction createMarkup(images) {\n  return images\n    .map(\n      ({\n        webformatURL,\n        largeImageURL,\n        tags,\n        likes,\n        views,\n        comments,\n        downloads,\n      }) => {\n        return `<li class=\"gallery__item\">\n        <div class=\"gallery__card\">\n          <a href=\"${largeImageURL}\" class=\"gallery-card__link\"\n            ><img src=\"${webformatURL}\" alt=\"${tags}\" class=\"gallery-card__image\"\n          /></a>\n          <div class=\"gallery-card__description\">\n            <p class=\"gallery-card__text\">Likes <span>${likes}</span></p>\n            <p class=\"gallery-card__text\">Views <span>${views}</span></p>\n            <p class=\"gallery-card__text\">Comments <span>${comments}</span></p>\n            <p class=\"gallery-card__text\">Downloads <span>${downloads}</span></p>\n          </div>\n        </div>\n      </li>`;\n      }\n    )\n    .join('');\n}\n//at repeated input unlock button\njsInput.addEventListener('input', function () {\n  btn.disabled = false;\n});\n\nimgList.addEventListener('click', function (evt) {\n  evt.preventDefault();\n});\n"],"names":["API_URL","API_KEY","fetchImg","userRequest","page","axios","gallerySimple","SimpleLightbox","btn","imgList","form","jsInput","loader","searchForm","evt","inputValue","res","iziToast","createMarkup","err","images","webformatURL","largeImageURL","tags","likes","views","comments","downloads"],"mappings":"+vBAIA,MAAMA,EAAU,2BACVC,EAAU,qCAEVC,EAAW,MAAOC,EAAaC,KAClB,MAAMC,EAAM,IAC3B,GAAGL,CAAO,QAAQC,CAAO,MAAME,CAAW,qEAAqE,QAAQ,SAASC,CAAI,GACpI,CACE,OAAQ,CACN,WAAY,QACZ,YAAa,aACb,WAAY,OACZ,KAAMA,EACN,SAAU,EACX,CACF,CACL,GACkB,KCXZE,EAAgB,IAAIC,EAAe,aAAc,CACrD,aAAc,MACd,aAAc,GAChB,CAAC,EAEKC,EAAM,SAAS,cAAc,uBAAuB,EACpDC,EAAU,SAAS,cAAc,cAAc,EAC/CC,EAAO,SAAS,cAAc,UAAU,EACxCC,EAAU,SAAS,cAAc,wBAAwB,EACzDC,EAAS,SAAS,cAAc,SAAS,EAC/CA,EAAO,MAAM,QAAU,OAEvBF,EAAK,iBAAiB,SAAUG,CAAU,EAE1C,SAASA,EAAWC,EAAK,CACvBA,EAAI,eAAc,EAClBF,EAAO,MAAM,QAAU,QACvB,MAAMG,EAAaD,EAAI,cAAc,SAAS,UAAU,EAAE,MACrDC,EAMHb,EAASa,EAAY,CAAC,EACnB,KAAKC,GAAO,CAEPA,EAAI,QAAU,EAChBC,EAAS,KAAK,CACZ,QACE,2EACF,gBAAiB,kBAC7B,CAAW,GAGDR,EAAQ,UAAY,GACpBA,EAAQ,mBAAmB,YAAaS,EAAaF,EAAI,IAAI,CAAC,EAC9DV,EAAc,QAAO,EAE/B,CAAO,EACA,MAAMa,GAAO,CACZ,QAAQ,IAAIA,CAAG,EACfF,EAAS,MAAM,CACb,MAAO,gBACP,MAAO,OACP,gBAAiB,UACjB,aAAc,OACd,QAAS,MACT,SAAU,WACV,aAAc,GACd,QAAS,IACT,QAAS,GAAGE,CAAG,EACzB,CAAS,CACT,CAAO,EACA,QAAQ,IAAM,CAEbP,EAAO,MAAM,QAAU,MAC/B,CAAO,GAtCHJ,EAAI,SAAW,GACfS,EAAS,KAAK,CACZ,QAAS,0BACf,CAAK,EAqCL,CAEA,SAASC,EAAaE,EAAQ,CAC5B,OAAOA,EACJ,IACC,CAAC,CACC,aAAAC,EACA,cAAAC,EACA,KAAAC,EACA,MAAAC,EACA,MAAAC,EACA,SAAAC,EACA,UAAAC,CACR,IACe;AAAA;AAAA,qBAEML,CAAa;AAAA,yBACTD,CAAY,UAAUE,CAAI;AAAA;AAAA;AAAA,wDAGKC,CAAK;AAAA,wDACLC,CAAK;AAAA,2DACFC,CAAQ;AAAA,4DACPC,CAAS;AAAA;AAAA;AAAA,YAKhE,EACA,KAAK,EAAE,CACZ,CAEAhB,EAAQ,iBAAiB,QAAS,UAAY,CAC5CH,EAAI,SAAW,EACjB,CAAC,EAEDC,EAAQ,iBAAiB,QAAS,SAAUK,EAAK,CAC/CA,EAAI,eAAc,CACpB,CAAC"}